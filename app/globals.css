@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

html {
  scroll-behavior: smooth;
  background-color: var(--background);
}

/* Safe area for iOS notch and home indicator */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Utility to apply full safe-area padding on mobile shells */
  .ios-safe {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

@theme {
  --color-brand: #E74802;
  --color-brand-foreground: #FFFFFF;
  --color-background: #FAFAFA;
  --color-foreground: #1A1A1A;
  --color-border: #E5E5E5;
  --color-text-secondary: #5F6368;

  /* iOS Semantic Tokens (mapped to existing palette) */
  --system-background: var(--color-background);
  --secondary-system-background: var(--surface);
  --tertiary-system-background: var(--surface-muted);
  --label: var(--color-foreground);
  --secondary-label: var(--color-text-secondary);

  /* Spacing & grid (8pt baseline) */
  --spacing-8: 0.5rem; /* 8px */
  --spacing-16: 1rem;  /* 16px */
  --spacing-24: 1.5rem; /* 24px */

  /* Corner radii (iOS recommendations) */
  --corner-card: 0.75rem; /* 12px */
  --corner-soft: 1rem;    /* 16px */

  --radius-sm: 0.125rem;
  /* Strict swiss - squarer */
  --radius-md: 0.25rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1.5rem;
  /* For rounded mobile action buttons */
} 

/* Neo-Swiss Typography */
.text-swiss-header {
  line-height: 0.95;
  letter-spacing: -0.04em;
}

/* Material Ripple Simulation */
.ripple {
  position: relative;
  overflow: hidden;
}

.ripple::after {
  content: "";
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
  background-image: radial-gradient(circle, #fff 10%, transparent 10.01%);
  background-repeat: no-repeat;
  background-position: 50%;
  transform: scale(10, 10);
  opacity: 0;
  transition: transform .5s, opacity 1s;
}

.ripple:active::after {
  transform: scale(0, 0);
  opacity: .3;
  transition: 0s;
}

:root {
  color-scheme: light;
  --background: var(--color-background);
  --foreground: var(--color-foreground);
  --brand: var(--color-brand);
  --border: var(--color-border);
  --surface: #FFFFFF;
  --surface-muted: #F9FAFB;
  --surface-strong: #F3F4F6;
  --surface-stronger: #E5E7EB;
}

/* Global Focus Styles for Accessibility */
:focus-visible {
  outline: 2px solid var(--color-brand);
  outline-offset: 2px;
}

/* Prevent pinch-to-zoom and double-tap zoom on mobile webview to provide a consistent app-like experience.
   Note: disabling zoom may affect accessibility for users who rely on magnification. If you want to preserve
   accessibility, consider improving text sizing and responsive layout instead. */
html, body, input, textarea, select, button {
  touch-action: manipulation;
  -ms-touch-action: manipulation;
}

/* Prevent iOS text-size adjustment which can cause layout jumps */
html {
  -webkit-text-size-adjust: 100%;
}

/* Active States for Buttons (Swiss Style - Clear Feedback) */
button:active:not(:disabled),
a:active:not(:disabled),
[role="button"]:active:not(:disabled) {
  transform: scale(0.98);
}

/* Disabled States */
button:disabled,
[role="button"][aria-disabled="true"] {
  cursor: not-allowed;
  opacity: 0.5;
}

/* Desktop Density Tokens (Tauri) */
.desktop-density {
  --spacing-page-y: 1.5rem;
  --spacing-header-mb: 1.5rem;
  --spacing-section-gap: 1rem;
}

@media (min-width: 1024px) {
  .desktop-density {
    --spacing-page-y: 2rem;
    --spacing-header-mb: 2rem;
  }
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    color-scheme: dark;
    --color-background: #0E1114;
    --color-foreground: #F2F2F2;
    --color-border: #232A30;
    --color-brand: #E74802;
    --color-brand-foreground: #FFFFFF;
    --color-text-secondary: #A1A1A1;
    --surface: #151A1E;
    --surface-muted: #171C21;
    --surface-strong: #1C2229;
    --surface-stronger: #232B35;
    --background: var(--color-background);
    --foreground: var(--color-foreground);
  }
}

.dark {
  color-scheme: dark;
  --color-background: #0E1114;
  --color-foreground: #F2F2F2;
  --color-border: #232A30;
  --color-brand: #E74802;
  --color-brand-foreground: #FFFFFF;
  --color-text-secondary: #A1A1A1;
  --surface: #151A1E;
  --surface-muted: #171C21;
  --surface-strong: #1C2229;
  --surface-stronger: #232B35;
}

body {
  background-color: var(--background);
  color: var(--foreground);
  font-family: var(--font-geist-sans), Inter, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Transitions removed for "instant" feel as requested */
}

/* Swiss Style Typography Adjustments */
h1,
h2,
h3,
h4,
h5,
h6 {
  @apply font-bold tracking-tight;
  color: var(--foreground);
}

.noise-bg {
  position: relative;
}

.noise-bg::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: -1;
  opacity: 0.03;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3column%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

/* 3D Transform Utilities */
.perspective-1000 {
  perspective: 1000px;
}

.transform-style-3d {
  transform-style: preserve-3d;
}

.backface-hidden {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

.rotate-y-180 {
  transform: rotateY(180deg);
}

@keyframes streakPulse {
  0% {
    transform: scale(1);
  }

  40% {
    transform: scale(1.05);
  }

  100% {
    transform: scale(1);
  }
}

.animate-streak-pulse {
  animation: streakPulse 0.6s ease-out;
}

.dark .bg-white:not(.theme-static-light) {
  background-color: var(--surface);
}

.dark .bg-white\/50:not(.theme-static-light) {
  background-color: rgba(20, 24, 29, 0.5);
}

.dark .bg-white\/70:not(.theme-static-light) {
  background-color: rgba(20, 24, 29, 0.7);
}

.dark .bg-white\/80:not(.theme-static-light) {
  background-color: rgba(20, 24, 29, 0.8);
}

.dark .bg-white\/90:not(.theme-static-light) {
  background-color: rgba(20, 24, 29, 0.9);
}

.dark .bg-white\/95:not(.theme-static-light) {
  background-color: rgba(20, 24, 29, 0.95);
}

.dark .bg-gray-50 {
  background-color: var(--surface-muted);
}

.dark .bg-gray-50\/50 {
  background-color: rgba(22, 27, 33, 0.5);
}

.dark .bg-gray-50\/60 {
  background-color: rgba(23, 28, 33, 0.6);
}

.dark .bg-gray-50\/80 {
  background-color: rgba(23, 28, 33, 0.8);
}

.dark .bg-gray-100 {
  background-color: var(--surface-strong);
}

.dark .bg-gray-100\/80 {
  background-color: rgba(28, 34, 41, 0.8);
}

.dark .bg-gray-200 {
  background-color: var(--surface-stronger);
}

.dark .hover\:bg-white:hover:not(.theme-static-light) {
  background-color: var(--surface);
}

.dark .hover\:bg-white\/90:hover:not(.theme-static-light) {
  background-color: rgba(20, 24, 29, 0.9);
}

.dark .hover\:bg-gray-50:hover:not(.theme-static-light) {
  background-color: var(--surface-muted);
}

.dark .hover\:bg-gray-100:hover:not(.theme-static-light) {
  background-color: var(--surface-strong);
}

.dark .hover\:bg-gray-200:hover:not(.theme-static-light) {
  background-color: var(--surface-stronger);
}

.dark .focus\:bg-white:focus:not(.theme-static-light) {
  background-color: var(--surface);
}

.dark .border-gray-200 {
  border-color: #2D343F;
}

.dark .border-gray-300 {
  border-color: #3A4350;
}

.dark .text-gray-300 {
  color: #9AA3AD;
}

.dark .text-gray-400 {
  color: #8A93A0;
}

.dark .placeholder\:text-gray-400::placeholder {
  color: #8A93A0;
}

/* Landing Page Animations */
@keyframes scrollBounce {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(8px);
  }
}

.animate-scroll-bounce {
  animation: scrollBounce 2s ease-in-out infinite;
}

/* Step connector lines for How It Works section */
.step-connector {
  position: relative;
}

.step-connector::after {
  content: "";
  position: absolute;
  top: 2rem;
  left: calc(100% + 1rem);
  width: calc(100% - 2rem);
  height: 2px;
  background: linear-gradient(90deg, var(--color-brand) 0%, transparent 100%);
  opacity: 0.2;
}

.step-connector:last-child::after {
  display: none;
}

@media (max-width: 768px) {
  .step-connector::after {
    display: none;
  }
}

/* CTA arrow animation */
.cta-arrow-shift {
  transition: transform 0.2s ease-out;
}

.group:hover .cta-arrow-shift {
  transform: translateX(4px);
}

/* Comparison table styles */
.comparison-table {
  @apply w-full text-sm;
}

.comparison-table th,
.comparison-table td {
  @apply py-3 px-4 text-left border-b border-border;
}

.comparison-table th {
  @apply font-bold text-foreground/80 bg-gray-50;
}

.dark .comparison-table th {
  background-color: var(--surface-muted);
}

.comparison-table td {
  @apply text-foreground/70;
}

.comparison-table tr:last-child td {
  @apply border-b-0;
}